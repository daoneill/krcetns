<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KRCETNS | Interactive School Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            scroll-behavior: smooth;
        }

        .bg-krc-teal {
            background-color: #006064;
        }

        .text-krc-teal {
            color: #006064;
        }

        .border-krc-teal {
            border-color: #006064;
        }

        .bg-krc-green {
            background-color: #76C12E;
        }

        .text-krc-green {
            color: #76C12E;
        }

        .border-krc-green {
            border-color: #76C12E;
        }

        .bg-krc-orange {
            background-color: #FFC107;
        }

        .text-krc-orange {
            color: #FFC107;
        }

        .border-krc-orange {
            border-color: #FFC107;
        }

        .bg-krc-light {
            background-color: #F1F8F9;
        }

        .bg-krc-green-light {
            background-color: #F8FFF0;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: auto;
            height: 300px;
        }

        .fade-in {
            animation: fadeIn 0.4s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .school-logo {
            height: 60px;
            width: auto;
            object-fit: contain;
        }

        .school-logo-footer {
            height: 80px;
            width: auto;
            filter: brightness(0) invert(1);
            opacity: 0.9;
        }

        .nav-text {
            font-size: 0.82rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .dropdown-item {
            font-size: 0.85rem;
            font-weight: 600;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

    <div id="app" class="flex flex-col min-h-screen">
        <!-- Initial Loading State -->
        <div class="flex items-center justify-center flex-grow">
            <div class="text-center">
                <p class="text-krc-teal font-bold animate-pulse text-xl uppercase tracking-widest">Initialising School
                    Portal...</p>
                <p class="text-gray-400 text-sm mt-2">Connecting to data.json</p>
            </div>
        </div>
    </div>

    <script>
        let currentView = 'home';
        let SITE_DATA = null;

        /**
         * FETCH DATA
         * Simplified relative fetch to avoid URL constructor errors in restricted environments.
         * This function attempts to load 'data.json' from the same directory as the HTML file.
         */
        async function loadSiteData() {
            try {
                // Fetch using relative path - most reliable across GitHub/Local environments
                const response = await fetch('data.json');

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                SITE_DATA = await response.json();
                renderApp();
            } catch (error) {
                console.error('Failed to load site data:', error);

                // Detailed Fallback UI to help non-technical users identify issues
                document.getElementById('app').innerHTML = `
                    <div class="p-10 md:p-20 text-center flex flex-col items-center justify-center min-h-screen bg-gray-100">
                        <div class="bg-white p-8 md:p-12 rounded-[2rem] max-w-2xl shadow-2xl border border-red-100">
                            <div class="text-6xl mb-6">‚ö†Ô∏è</div>
                            <h2 class="text-3xl font-black text-gray-800 mb-4">Content Connection Error</h2>
                            <p class="text-gray-600 mb-8 leading-relaxed text-lg text-left">
                                The portal could not load the <strong>data.json</strong> file. 
                                <br><br>
                                <strong>Common reasons:</strong>
                                <ul class="text-left list-disc list-inside text-gray-500 space-y-2 mb-8">
                                    <li>The file <strong>data.json</strong> has not been uploaded to GitHub yet.</li>
                                    <li>There is a syntax error (like a missing comma) in your <strong>data.json</strong>.</li>
                                    <li>You are opening the file locally without a web server (browsers block this for security).</li>
                                </ul>
                            </p>
                            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                <button onclick="location.reload()" class="bg-krc-teal text-white px-10 py-3 rounded-xl font-bold hover:bg-teal-700 transition shadow-lg">Retry Connection</button>
                                <a href="https://github.com" target="_blank" class="bg-gray-800 text-white px-10 py-3 rounded-xl font-bold hover:bg-black transition shadow-lg text-center">Check GitHub Repo</a>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        const UI = {
            Navbar: () => `
                <nav class="bg-white shadow-md sticky top-0 z-50">
                    <div class="max-w-[1600px] mx-auto px-4 flex justify-between h-24">
                        <div class="flex items-center cursor-pointer flex-shrink-0" onclick="router('home')">
                            <img src="krcetns_logo.webp" alt="Logo" class="school-logo mr-3">
                        </div>
                        
                        <div class="hidden lg:flex items-center space-x-4">
                            <button onclick="router('home')" class="nav-text text-gray-600 hover:text-krc-green transition">Home</button>
                            
                            <div class="relative group h-full flex items-center">
                                <button class="nav-text text-gray-600 group-hover:text-krc-green transition flex items-center">
                                    Our School <span class="ml-1 text-[10px]">‚ñº</span>
                                </button>
                                <div class="absolute top-[80%] left-0 w-64 bg-white shadow-2xl rounded-2xl py-4 border border-gray-100 hidden group-hover:block fade-in z-50">
                                    <button onclick="router('schoolDay')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">Our School Day</button>
                                    <button onclick="router('ethos')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">Ethos & Values</button>
                                    <button onclick="router('policies')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">School Policies</button>
                                    <button onclick="router('calendar')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">School Calendar</button>
                                </div>
                            </div>

                            <div class="relative group h-full flex items-center">
                                <button class="nav-text text-gray-600 group-hover:text-krc-green transition flex items-center">
                                    Our Team <span class="ml-1 text-[10px]">‚ñº</span>
                                </button>
                                <div class="absolute top-[80%] left-0 w-64 bg-white shadow-2xl rounded-2xl py-4 border border-gray-100 hidden group-hover:block fade-in z-50">
                                    <button onclick="router('team')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">School Team (Staff)</button>
                                    <button onclick="router('bom')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">Board of Management</button>
                                    <button onclick="router('pa')" class="dropdown-item block w-full text-left px-8 py-2.5 hover:bg-gray-50 hover:text-krc-green transition">Parents Association</button>
                                </div>
                            </div>

                            <button onclick="router('news')" class="nav-text text-gray-600 hover:text-krc-green transition">News</button>
                            <button onclick="router('admissions')" class="nav-text bg-krc-green text-white px-6 py-2.5 rounded-full shadow-lg hover:bg-green-700 transition">Join Us</button>
                        </div>
                        
                        <div class="flex items-center lg:hidden">
                            <button onclick="toggleMobileMenu()" class="text-3xl text-krc-green">‚ò∞</button>
                        </div>
                    </div>
                    
                    <div id="mobile-menu" class="hidden lg:hidden bg-white shadow-2xl absolute w-full border-t border-gray-100 max-h-[85vh] overflow-y-auto">
                        <div class="flex flex-col py-2 font-bold text-gray-700">
                            <button onclick="router('home')" class="text-left px-8 py-4 border-b border-gray-50">Home</button>
                            <div class="px-8 py-3 text-[10px] text-gray-400 uppercase tracking-widest bg-gray-50">Our School</div>
                            <button onclick="router('schoolDay')" class="text-left px-12 py-3 border-b border-gray-50">Our School Day</button>
                            <button onclick="router('ethos')" class="text-left px-12 py-3 border-b border-gray-50">Ethos & Values</button>
                            <button onclick="router('policies')" class="text-left px-12 py-3 border-b border-gray-50">School Policies</button>
                            <button onclick="router('calendar')" class="text-left px-12 py-3 border-b border-gray-50">School Calendar</button>
                            
                            <div class="px-8 py-3 text-[10px] text-gray-400 uppercase tracking-widest bg-gray-50">Our Team</div>
                            <button onclick="router('team')" class="text-left px-12 py-3 border-b border-gray-50">School Team (Staff)</button>
                            <button onclick="router('bom')" class="text-left px-12 py-3 border-b border-gray-50">Board of Management</button>
                            <button onclick="router('pa')" class="text-left px-12 py-3 border-b border-gray-50">Parents Association</button>
                            
                            <button onclick="router('news')" class="text-left px-8 py-4 border-b border-gray-50">News</button>
                            <button onclick="router('admissions')" class="text-center mx-6 my-4 py-4 rounded-xl text-white bg-krc-green">JOIN OUR SCHOOL</button>
                        </div>
                    </div>
                </nav>
            `,
            Footer: () => `
                <footer class="bg-slate-900 text-white mt-auto py-16">
                    <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12 text-center md:text-left">
                        <div class="flex flex-col items-center md:items-start">
                            <img src="krcetns_logo.webp" class="school-logo-footer mb-6">
                            <p class="text-slate-400 text-sm leading-relaxed max-w-xs">Equality-based primary education for Killester, Raheny, and Clontarf.</p>
                        </div>
                         <div>
                            <h3 class="text-krc-green font-bold mb-6 uppercase tracking-widest text-sm">Our School</h3>
                            <div class="flex flex-col space-y-3 text-slate-400 text-sm">
                                <button onclick="router('schoolDay')" class="hover:text-white text-left transition">Our School Day</button>
                                <button onclick="router('ethos')" class="hover:text-white text-left transition">Ethos & Values</button>
                                <button onclick="router('policies')" class="hover:text-white text-left transition">School Policies</button>
                                <button onclick="router('calendar')" class="hover:text-white text-left transition">School Calendar</button>
                            </div>
                            <h3 class="text-krc-green font-bold mt-8 mb-6 uppercase tracking-widest text-sm">Our Team</h3>
                            <div class="flex flex-col space-y-3 text-slate-400 text-sm">
                                <button onclick="router('team')" class="hover:text-white text-left transition">School Team (Staff)</button>
                                <button onclick="router('bom')" class="hover:text-white text-left transition">Board of Management</button>
                                <button onclick="router('pa')" class="hover:text-white text-left transition">Parents Association</button>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-krc-green font-bold mb-6 uppercase tracking-widest text-sm">Contact</h3>
                            <a href="${SITE_DATA.contact.mapsUrl}" target="_blank" class="block text-slate-400 text-sm hover:text-white leading-relaxed transition">
                                Collins Avenue East,<br>Dublin 5, D05 F2H1
                            </a>
                            <p class="text-slate-400 text-sm mt-4 font-bold tracking-wider">${SITE_DATA.contact.phone}</p>
                            <p class="text-slate-400 text-sm mt-1">${SITE_DATA.contact.email}</p>
                        </div>
                        <div>
                            <button onclick="router('admissions')" class="bg-krc-green hover:bg-green-700 text-white px-6 py-3 rounded-xl font-bold w-full shadow-lg transition">Apply to Join</button>
                        </div>
                    </div>
                </footer>
            `
        };

        const Pages = {
            home: () => `
                <div class="relative rounded-[3rem] overflow-hidden mb-16 shadow-2xl group border-4 border-white">
                    <img src="images/school/krc-campus.png" class="w-full h-[500px] md:h-[600px] object-cover transition duration-700 group-hover:scale-105" alt="KRC ETNS Campus">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent flex flex-col justify-end p-10 md:p-20">
                        <div class="max-w-4xl fade-in">
                            <h1 class="text-4xl md:text-7xl font-black text-white mb-6 leading-none tracking-tight">Killester Raheny Clontarf</h1>
                            <h2 class="text-3xl md:text-5xl font-black text-krc-green mb-8 leading-none tracking-tight drop-shadow-lg">Educate Together National School</h2>
                            <p class="text-xl md:text-2xl text-gray-200 font-medium max-w-2xl leading-relaxed mb-10 drop-shadow-md">A child-centred, equality-based school where every child is valued and respected.</p>
                            <div class="flex flex-wrap gap-4">
                                <button onclick="router('admissions')" class="bg-krc-green hover:bg-green-700 text-white px-10 py-5 rounded-2xl font-black text-lg shadow-xl hover:scale-105 transition transform active:scale-95">Enroll for 2026/27</button>
                                <button onclick="router('ethos')" class="bg-white/10 hover:bg-white/20 backdrop-blur-md text-white border-2 border-white/30 px-10 py-5 rounded-2xl font-black text-lg shadow-xl hover:scale-105 transition transform active:scale-95">Our Ethos</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-24">
                    <a href="mailto:${SITE_DATA.contact.email}" class="bg-white p-10 rounded-[2.5rem] shadow-sm border border-gray-100 flex flex-col items-center text-center hover:shadow-xl hover:-translate-y-2 transition duration-300 group">
                        <div class="w-20 h-20 bg-blue-50 text-blue-500 rounded-3xl flex items-center justify-center text-4xl mb-6 shadow-inner group-hover:bg-blue-500 group-hover:text-white transition duration-300">‚úâÔ∏è</div>
                        <h4 class="font-black text-gray-800 text-xl mb-2">Email Us</h4>
                        <p class="text-gray-500 text-sm font-medium">${SITE_DATA.contact.email}</p>
                    </a>
                    <a href="${SITE_DATA.contact.mapsUrl}" target="_blank" class="bg-white p-10 rounded-[2.5rem] shadow-sm border border-gray-100 flex flex-col items-center text-center hover:shadow-xl hover:-translate-y-2 transition duration-300 group">
                        <div class="w-20 h-20 bg-red-50 text-red-500 rounded-3xl flex items-center justify-center text-4xl mb-6 shadow-inner group-hover:bg-red-500 group-hover:text-white transition duration-300">üìç</div>
                        <h4 class="font-black text-gray-800 text-xl mb-2">Visit Us</h4>
                        <p class="text-gray-500 text-sm font-medium">Collins Ave East, Dublin 5</p>
                    </a>
                    <div class="bg-white p-10 rounded-[2.5rem] shadow-sm border border-gray-100 flex flex-col items-center text-center hover:shadow-xl hover:-translate-y-2 transition duration-300 group cursor-default">
                        <div class="w-20 h-20 bg-green-50 text-green-500 rounded-3xl flex items-center justify-center text-4xl mb-6 shadow-inner group-hover:bg-green-500 group-hover:text-white transition duration-300">üìû</div>
                        <h4 class="font-black text-gray-800 text-xl mb-2">Call Us</h4>
                        <p class="text-gray-500 text-sm font-medium">${SITE_DATA.contact.phone}</p>
                    </div>
                </div>

                <div class="mb-24">
                    <div class="flex items-end justify-between mb-12 px-4">
                        <div class="max-w-xl">
                            <h2 class="text-4xl md:text-5xl font-black text-krc-teal leading-tight tracking-tight mb-4">School Life in Focus</h2>
                            <p class="text-lg text-gray-600 font-medium">Explore our vibrant learning environment and modern facilities.</p>
                        </div>
                        <button onclick="router('news')" class="hidden md:block text-krc-green font-black uppercase tracking-widest text-sm hover:underline">View News &rarr;</button>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="group relative rounded-[2rem] overflow-hidden shadow-lg h-80 border-4 border-white">
                            <img src="images/school/garden-01.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="School Garden">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex items-end p-8">
                                <p class="text-white font-bold text-lg">Outdoor Learning</p>
                            </div>
                        </div>
                        <div class="group relative rounded-[2rem] overflow-hidden shadow-lg h-80 border-4 border-white lg:col-span-2">
                            <img src="images/school/krc-classroom-01.png" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Classroom">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex items-end p-8">
                                <p class="text-white font-bold text-xl leading-snug">Our bright, modern classrooms are designed for active learning.</p>
                            </div>
                        </div>
                        <div class="group relative rounded-[2rem] overflow-hidden shadow-lg h-80 border-4 border-white">
                            <img src="images/school/library-01.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Library">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex items-end p-8">
                                <p class="text-white font-bold text-lg">School Library</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-12 md:p-20 rounded-[4rem] shadow-2xl border border-gray-100 grid lg:grid-cols-2 gap-16 items-center mb-24 relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-krc-green/5 rounded-full -mr-32 -mt-32"></div>
                    <div class="relative z-10">
                        <h2 class="text-4xl md:text-6xl font-black text-krc-teal mb-8 leading-none tracking-tight">Our School's Growth</h2>
                        <p class="text-xl text-gray-600 mb-10 leading-relaxed font-medium">Since opening in 2019, we have grown from 7 pupils to a community catering for 3rd class. By 2026, we will be a full primary school.</p>
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button onclick="router('team')" class="bg-krc-teal text-white px-10 py-5 rounded-2xl font-black text-lg shadow-xl hover:bg-teal-700 transition transform hover:-translate-y-1">Meet Our Team</button>
                            <div class="flex items-center gap-4 px-6">
                                <span class="text-3xl font-black text-krc-green">176+</span>
                                <span class="text-sm font-bold text-gray-500 leading-tight">Pupils<br>Enrolled</span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container bg-gray-50/50 p-8 rounded-[3rem] border border-gray-100 shadow-inner">
                        <canvas id="homeStatsChart"></canvas>
                    </div>
                </div>

                <div class="bg-krc-teal rounded-[4rem] p-12 md:p-20 text-white relative overflow-hidden mb-16 shadow-2xl">
                    <div class="absolute bottom-0 left-0 w-96 h-96 bg-white/5 rounded-full -ml-48 -mb-48"></div>
                    <div class="flex flex-col lg:flex-row items-center gap-16">
                        <div class="w-full lg:w-1/2 rounded-[3rem] overflow-hidden shadow-2xl border-4 border-white/20 transform -rotate-3 hover:rotate-0 transition duration-500">
                            <img src="images/pupils/pupils-01.jpg" class="w-full h-96 object-cover" alt="KRC ETNS Pupils">
                        </div>
                        <div class="w-full lg:w-1/2">
                            <h3 class="text-4xl md:text-5xl font-black mb-6 leading-tight tracking-tight italic">"No Child an Outsider"</h3>
                            <p class="text-xl md:text-2xl text-teal-50 mb-10 leading-relaxed font-medium">Our school culture is built on the core principle of authentic inclusion. Every child, parent, and staff member genuinely belongs here.</p>
                            <button onclick="router('ethos')" class="bg-white text-krc-teal px-10 py-5 rounded-2xl font-black text-lg shadow-xl hover:bg-teal-50 transition transform hover:-translate-y-1">Read Our Ethos</button>
                        </div>
                    </div>
                </div>
            `,
            schoolDay: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal leading-tight tracking-tight">${SITE_DATA.school_day.title}</h2></div>
                <section class="bg-white p-10 md:p-14 rounded-[3rem] shadow-xl border border-gray-100 mb-16">
                    <p class="text-xl text-gray-700 leading-relaxed mb-12">${SITE_DATA.school_day.message}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${SITE_DATA.school_day.schedule.map(item => `
                            <div class="flex items-center p-6 bg-gray-50 rounded-3xl border border-transparent hover:border-krc-green/10 transition">
                                <div class="w-24 font-black text-krc-green text-lg">${item.time}</div>
                                <div class="text-gray-700 font-medium">${item.event}</div>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `,
            ethos: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal leading-tight tracking-tight">Ethos & Values</h2></div>
                <div class="mb-12 rounded-[2.5rem] overflow-hidden shadow-xl border border-gray-100 fade-in">
                    <img src="images/pupils/all-children-wear-red-day-01.jpg" class="w-full h-80 object-cover" alt="KRC ETNS Pupils">
                </div>
                <section class="bg-white p-12 rounded-[2.5rem] shadow-lg border border-gray-100 mb-12">
                    <h3 class="text-3xl font-black text-krc-teal mb-8">${SITE_DATA.ethos.title}</h3>
                    <div class="text-gray-700 text-lg leading-relaxed space-y-6">
                        ${SITE_DATA.ethos.main_content.split('\n').map(p => p ? `<p>${p}</p>` : '').join('')}
                    </div>
                </section>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    ${SITE_DATA.ethos.links.map(link => `
                        <a href="${link.url}" target="_blank" class="bg-white p-8 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between hover:shadow-md transition border-t-4 border-krc-orange">
                            <h4 class="font-bold text-gray-800 mb-4 leading-tight">${link.title}</h4>
                            <span class="text-krc-green font-black text-xs uppercase tracking-wider">Visit Website &rarr;</span>
                        </a>
                    `).join('')}
                </div>
            `,
            policies: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal leading-tight tracking-tight">School Policies</h2></div>
                <section class="bg-white p-10 md:p-14 rounded-[2.5rem] shadow-lg border border-gray-100 mb-16">
                    <p class="text-krc-green font-bold text-lg mb-8">${SITE_DATA.school_policies.welcome}</p>
                    
                    <div class="text-gray-700 leading-relaxed text-lg space-y-6 mb-12">
                        ${SITE_DATA.school_policies.content.map(p => `<p>${p}</p>`).join('')}
                    </div>

                    <div class="bg-krc-light p-8 rounded-3xl border border-krc-green/10 mb-12">
                        <p class="text-gray-800 font-medium">
                            ${SITE_DATA.school_policies.sse_2021_report.text}
                            <a href="${SITE_DATA.school_policies.sse_2021_report.url}" class="text-krc-green font-bold hover:underline" target="_blank">
                                ${SITE_DATA.school_policies.sse_2021_report.title}
                            </a>
                        </p>
                    </div>

                    <h3 class="text-2xl font-black text-krc-teal mb-8">Policy Documents</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${SITE_DATA.school_policies.documents.map(doc => `
                            <a href="${doc.path}" target="_blank" class="p-6 bg-gray-50 rounded-3xl flex justify-between items-center hover:bg-krc-green-light transition group border border-transparent hover:border-krc-green/20">
                                <span class="font-bold text-gray-700 group-hover:text-krc-green transition">${doc.name}</span>
                                <span class="text-[10px] font-black bg-white border border-krc-green text-krc-green px-3 py-1 rounded-full uppercase">PDF</span>
                            </a>
                        `).join('')}
                    </div>
                </section>
            `,
            calendar: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal leading-tight tracking-tight">${SITE_DATA.calendar.title}</h2></div>
                <section class="bg-white p-10 md:p-14 rounded-[3rem] shadow-xl border border-gray-100 mb-16 text-center">
                    <div class="max-w-2xl mx-auto">
                        <div class="text-6xl mb-8">üìÖ</div>
                        <h3 class="text-3xl font-black text-gray-800 mb-4">Academic Year ${SITE_DATA.calendar.academic_year}</h3>
                        <p class="text-gray-600 mb-12 text-lg">Click the button below to view or download our full school calendar for the current academic year.</p>
                        <a href="${SITE_DATA.calendar.pdf_url}" target="_blank" class="inline-block bg-krc-green text-white px-12 py-4 rounded-2xl font-black shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
                            Download School Calendar (PDF)
                        </a>
                        <div class="mt-16 pt-12 border-t border-gray-100">
                            <h4 class="text-xl font-bold text-gray-800 mb-8 uppercase tracking-widest">Upcoming Dates</h4>
                            <div class="space-y-4 text-left">
                                ${SITE_DATA.calendar.events.map(ev => `
                                    <div class="p-6 bg-gray-50 rounded-2xl flex flex-col md:flex-row md:items-center justify-between gap-4">
                                        <div class="flex flex-col">
                                            <span class="font-black text-krc-green text-sm uppercase mb-1">${ev.date}</span>
                                            <span class="text-gray-800 font-bold text-lg">${ev.title}</span>
                                        </div>
                                        <p class="text-gray-600 text-sm md:text-right max-w-md">${ev.description}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>
            `,
            team: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal tracking-tight leading-tight">School Team (Staff)</h2></div>
                <section class="bg-white p-10 md:p-14 rounded-[2.5rem] shadow-lg border border-gray-100 mb-16">
                    <h3 class="text-3xl font-black text-krc-teal mb-8">Principal's Welcome</h3>
                    <div class="text-gray-700 leading-relaxed text-lg space-y-6">
                        ${SITE_DATA.principal.message.split('\n').map(p => p ? `<p>${p}</p>` : '').join('')}
                    </div>
                    <div class="mt-10 pt-10 border-t border-gray-50 flex items-center justify-between">
                        <div>
                            <p class="font-black text-2xl text-krc-teal">${SITE_DATA.principal.name}</p>
                            <p class="text-krc-orange font-bold uppercase tracking-widest text-xs">${SITE_DATA.principal.role}</p>
                        </div>
                    </div>
                </section>

                <div class="space-y-20">
                    ${['Leadership & Administration', 'Teaching Team', 'Special Education Team', 'Additional Needs Assistants (ANAs)', 'Support Services'].map((label, i) => {
                const keys = ['leadership', 'teachers', 'special_education', 'ana', 'support'];
                const members = SITE_DATA.staff[keys[i]] || [];
                return `
                            <div>
                                <h4 class="text-krc-green font-black uppercase tracking-[0.2em] text-[10px] mb-8 border-b-2 border-krc-green/10 pb-4">${label}</h4>
                                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
                                    ${members.map(m => renderStaffCard(m)).join('')}
                                </div>
                            </div>
                        `;
            }).join('')}
                </div>
            `,
            bom: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal leading-tight tracking-tight">Board of Management</h2></div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 text-left">
                    <div class="lg:col-span-2 space-y-12">
                        <section class="bg-white p-10 rounded-[2.5rem] shadow-lg border border-gray-100">
                            <h3 class="text-2xl font-bold text-krc-teal mb-8 leading-tight">About our BOM</h3>
                            <p class="text-gray-700 mb-6 text-lg leading-relaxed">${SITE_DATA.bom.about}</p>
                            <ul class="grid md:grid-cols-2 gap-4 text-sm font-medium">
                                ${SITE_DATA.bom.responsibilities.map(r => `<li class="flex items-start p-4 bg-gray-50 rounded-xl leading-tight"><span class="text-krc-orange mr-3">‚óè</span> ${r}</li>`).join('')}
                            </ul>
                        </section>

                        <section class="bg-white p-10 rounded-[2.5rem] shadow-lg border border-gray-100">
                            <h3 class="text-2xl font-bold text-krc-teal mb-8">Current Members</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${SITE_DATA.bom.members.map(m => `
                                    <div class="p-6 border-2 border-krc-light rounded-3xl group hover:border-krc-teal transition">
                                        <p class="font-black text-gray-800 text-lg leading-tight">${m.name}</p>
                                        <p class="text-[10px] font-bold text-krc-orange uppercase tracking-widest mt-2">${m.role}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    </div>
                    <div class="lg:col-span-1">
                        <section class="bg-krc-teal text-white p-10 rounded-[2.5rem] shadow-xl sticky top-32">
                            <h3 class="text-2xl font-black mb-8 flex items-center"><span class="mr-3">üìÅ</span> Minutes</h3>
                            <div class="space-y-4">
                                ${SITE_DATA.bom.reports.map(r => `<a href="${r.url}" class="block p-5 bg-white/10 rounded-2xl hover:bg-white/20 transition font-bold border border-white/5 text-center">${r.title}</a>`).join('')}
                            </div>
                        </section>
                    </div>
                </div>
            `,
            pa: () => `
                <div class="mb-12 fade-in"><h2 class="text-4xl font-black text-krc-teal leading-tight tracking-tight">Parents Association</h2></div>
                
                <div class="grid lg:grid-cols-3 gap-12 text-left mb-16">
                    <div class="lg:col-span-2 space-y-12">
                        <section class="bg-white p-10 md:p-14 rounded-[3rem] shadow-xl border border-gray-100 h-full">
                            <div class="mb-12">
                                <h4 class="text-2xl font-black text-krc-teal mb-6">Purpose</h4>
                                <p class="text-lg text-gray-700 leading-relaxed">${SITE_DATA.pa.purpose}</p>
                            </div>
                            <div class="mb-12">
                                <h4 class="text-2xl font-black text-krc-teal mb-6">Committee Meetings</h4>
                                <div class="inline-flex items-center p-6 bg-orange-50 rounded-[2rem] border border-krc-orange/20 text-krc-orange">
                                    <span class="text-3xl mr-4">üóìÔ∏è</span>
                                    <p class="font-black leading-tight">${SITE_DATA.pa.meetings}</p>
                                </div>
                            </div>

                            <h4 class="text-2xl font-black text-krc-teal mb-8">Committee Members</h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                ${SITE_DATA.pa.members.map(m => `
                                    <div class="p-6 bg-gray-50 rounded-3xl border-2 border-transparent hover:border-krc-green/10 transition group">
                                        <p class="font-black text-gray-800 text-lg leading-tight mb-2 group-hover:text-krc-green transition">${m.name}</p>
                                        <p class="text-[10px] font-bold text-krc-green uppercase tracking-widest leading-tight">${m.role}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </section>
                    </div>

                    <div class="lg:col-span-1">
                        <section class="bg-krc-teal text-white p-10 rounded-[2.5rem] shadow-xl sticky top-32">
                            <h3 class="text-2xl font-black mb-8 flex items-center"><span class="mr-3">‚úâÔ∏è</span> Contact PA</h3>
                            <p class="text-teal-50 mb-8 text-sm leading-relaxed">For more details or to get involved, reach out to our committee members via email:</p>
                            <div class="space-y-4">
                                ${SITE_DATA.pa.contacts.map(c => `
                                    <a href="mailto:${c.email}" class="block p-5 bg-white/10 rounded-2xl hover:bg-white/20 transition border border-white/5 active:scale-95">
                                        <p class="text-[10px] uppercase font-black tracking-widest text-teal-200 mb-1">${c.label}</p>
                                        <p class="font-bold text-sm truncate">${c.email}</p>
                                    </a>
                                `).join('')}
                            </div>
                        </section>
                    </div>
                </div>

                <div class="mb-16 fade-in">
                    <div class="mb-10 px-4">
                        <h3 class="text-3xl md:text-5xl font-black text-krc-teal mb-4 tracking-tight">Community in Action</h3>
                        <p class="text-xl text-gray-500 font-medium max-w-2xl">Building our school community together through events, initiatives, and shared pride.</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="md:col-span-2 group relative h-[500px] rounded-[3rem] overflow-hidden shadow-2xl border-4 border-white">
                            <img src="images/pa_events/bbq-01.jpg" class="w-full h-full object-cover transition duration-700 group-hover:scale-105" alt="KRC ETNS BBQ">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent flex flex-col justify-end p-10">
                                <h4 class="text-white text-3xl font-black mb-2">Summer Family BBQ</h4>
                                <p class="text-teal-50 text-lg font-medium">Coming together to celebrate our school family.</p>
                            </div>
                        </div>
                        <div class="space-y-6">
                            <div class="group relative h-60 rounded-[2.5rem] overflow-hidden shadow-xl border-4 border-white">
                                <img src="images/pa_events/painting-the-school-03.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Painting the School">
                                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center p-6 text-center">
                                    <p class="text-white font-black">Painting our school environment together.</p>
                                </div>
                            </div>
                            <div class="group relative h-60 rounded-[2.5rem] overflow-hidden shadow-xl border-4 border-white">
                                <img src="images/pa_events/engineering-class-special-01.jpg" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="Special Engineering Class">
                                <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition duration-300 flex items-center justify-center p-6 text-center">
                                    <p class="text-white font-black">Supporting special learning initiatives.</p>
                                </div>
                            </div>
                        </div>
                        <div class="md:col-span-3 group relative h-64 rounded-[3rem] overflow-hidden shadow-xl border-4 border-white">
                            <img src="images/pa_events/climate-class-special-01.jpg" class="w-full h-full object-cover transition duration-700 group-hover:scale-105" alt="Climate Class">
                            <div class="absolute inset-0 bg-gradient-to-r from-krc-teal/80 to-transparent flex items-center p-12">
                                <div class="max-w-md">
                                    <h4 class="text-white text-2xl font-black mb-2 italic">Building a better future</h4>
                                    <p class="text-teal-50 font-bold uppercase tracking-widest text-xs">Sustainability Initiatives 2024</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            initiatives: () => `<div class="py-24 text-center bg-white rounded-[3rem] border border-gray-100 shadow-sm fade-in"><div class="text-7xl mb-8">üí°</div><h2 class="text-4xl font-black text-krc-teal mb-4">School Initiatives</h2><p class="text-xl text-gray-500 max-w-xl mx-auto leading-relaxed">Our school's exciting projects and community initiatives will be featured here.</p></div>`,
            facilities: () => `<div class="py-24 text-center bg-white rounded-[3rem] border border-gray-100 shadow-sm fade-in"><div class="text-7xl mb-8">üè¢</div><h2 class="text-4xl font-black text-krc-teal mb-4">Our Facilities</h2><p class="text-xl text-gray-500 max-w-xl mx-auto leading-relaxed">Information about our school building and learning environment will be available soon.</p></div>`,
            news: () => `<div class="py-24 text-center bg-white rounded-[3rem] border border-gray-100 shadow-sm fade-in"><div class="text-7xl mb-8">üóûÔ∏è</div><h2 class="text-4xl font-black text-krc-teal mb-4">Latest News</h2><p class="text-xl text-gray-500 max-w-xl mx-auto leading-relaxed">School updates and photos will appear here as they are published.</p></div>`,
            admissions: () => `<div class="max-w-4xl mx-auto py-12 text-center fade-in"><h2 class="text-6xl font-black text-krc-teal mb-12 leading-tight tracking-tight">Admissions</h2><div class="bg-white p-16 rounded-[3rem] border border-gray-100 shadow-xl"><h4 class="text-3xl font-black mb-6">Join Our Family</h4><p class="text-gray-600 mb-10 text-xl leading-relaxed text-left">Applications for Junior Infants normally open in October each year for the following September.</p><button class="bg-krc-green text-white px-12 py-5 rounded-2xl font-black shadow-xl hover:scale-105 transition">Download Admissions Notice</button></div></div>`
        };

        function renderStaffCard(member) {
            const fallback = `https://ui-avatars.com/api/?name=${encodeURIComponent(member.name)}&background=006064&color=fff&size=200`;
            return `
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 text-center hover:shadow-md transition">
                    <div class="w-20 h-20 rounded-full mx-auto mb-4 overflow-hidden border-2 border-krc-light bg-gray-50">
                        <img src="${member.image || fallback}" class="w-full h-full object-cover" onerror="this.src='${fallback}'">
                    </div>
                    <h4 class="font-bold text-gray-800 text-xs leading-tight mb-1">${member.name}</h4>
                    <p class="text-krc-green font-bold text-[9px] uppercase tracking-wider">${member.role}</p>
                </div>
            `;
        }

        function toggleMobileMenu() {
            const el = document.getElementById('mobile-menu');
            el.classList.toggle('hidden');
        }

        function router(view) {
            currentView = view;
            renderApp();
            window.scrollTo(0, 0);

            // Auto-close mobile menu on navigation
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu) mobileMenu.classList.add('hidden');
        }

        function renderApp() {
            if (!SITE_DATA) return;
            const app = document.getElementById('app');
            app.innerHTML = `
                ${UI.Navbar()}
                <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
                    ${Pages[currentView]()}
                </main>
                ${UI.Footer()}
            `;

            setTimeout(() => {
                if (currentView === 'home') initHomeStats();
                if (currentView === 'learning') initLearningChart();
            }, 100);
        }

        function initHomeStats() {
            const ctx = document.querySelector('#homeStatsChart');
            if (!ctx || !SITE_DATA.growth_chart) return;
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: SITE_DATA.growth_chart.labels,
                    datasets: [{
                        label: 'Students', data: SITE_DATA.growth_chart.data,
                        backgroundColor: '#76C12E', borderRadius: 8, barThickness: 25
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { display: false }, x: { grid: { display: false }, border: { display: false } } }
                }
            });
        }

        function initLearningChart() {
            const ctx = document.querySelector('#curriculumChart');
            if (!ctx) return;
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Moral Dev', 'Equality', 'Beliefs', 'Environment'],
                    datasets: [{
                        data: [25, 25, 25, 25],
                        backgroundColor: ['#006064', '#F57C00', '#009688', '#B2DFDB'],
                        borderWidth: 0
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } } }
            });
        }

        window.onload = loadSiteData;
    </script>
</body>

</html>